# SHIELD production environment template
# IMPORTANT: replace placeholders before deployment.
# Load in shell:
#   set -a && source prod.env && set +a

SPRING_PROFILES_ACTIVE=prod
APP_EXPOSED_PORT=8080
SERVER_PORT=8080

POSTGRES_DB=shield
POSTGRES_USER=shield
POSTGRES_PASSWORD=replace-with-strong-db-password
POSTGRES_PORT=5432
REDIS_PORT=6379

# Docker/Compose deployment should point to postgres service name.
SPRING_DATASOURCE_URL=jdbc:postgresql://postgres:5432/shield
SPRING_DATASOURCE_USERNAME=shield
SPRING_DATASOURCE_PASSWORD=replace-with-strong-db-password

JWT_SECRET=replace-with-64plus-char-random-secret
JWT_ACCESS_TOKEN_TTL_MINUTES=30
JWT_REFRESH_TOKEN_TTL_MINUTES=4320
PASSWORD_POLICY_MIN_LENGTH=12
PASSWORD_POLICY_MAX_LENGTH=128
PASSWORD_POLICY_REQUIRE_UPPER=true
PASSWORD_POLICY_REQUIRE_LOWER=true
PASSWORD_POLICY_REQUIRE_DIGIT=true
PASSWORD_POLICY_REQUIRE_SPECIAL=true
USER_LOCKOUT_MAX_FAILED_ATTEMPTS=5
USER_LOCKOUT_DURATION_MINUTES=30

# Comma-separated trusted origins for browser-based clients.
CORS_ALLOWED_ORIGINS=https://app.yourdomain.com
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Authorization,Content-Type,X-Correlation-Id
CORS_EXPOSED_HEADERS=X-Correlation-Id
CORS_ALLOW_CREDENTIALS=true
SECURITY_HSTS_ENABLED=true

SHIELD_FILES_MAX_SIZE_BYTES=10485760
SHIELD_FILES_ALLOWED_CONTENT_TYPES=application/pdf,image/jpeg,image/png,text/plain
SHIELD_FILES_MALWARE_SCAN_ENABLED=false

ROOT_LOCKOUT_MAX_FAILED_ATTEMPTS=5
ROOT_LOCKOUT_DURATION_MINUTES=30
ROOT_EMAIL_VERIFICATION_PROVIDER=DUMMY
ROOT_MOBILE_VERIFICATION_PROVIDER=DUMMY
ROOT_BOOTSTRAP_CREDENTIAL_FILE=/run/secrets/root-bootstrap-credential.txt

NOTIFICATION_EMAIL_ENABLED=true
NOTIFICATION_EMAIL_FROM=no-reply@yourdomain.com
SPRING_MAIL_HOST=smtp.gmail.com
SPRING_MAIL_PORT=587
SPRING_MAIL_USERNAME=replace-with-smtp-username
SPRING_MAIL_PASSWORD=replace-with-smtp-app-password

NOTIFICATION_SMS_ENABLED=false
NOTIFICATION_SMS_PROVIDER=DUMMY
NOTIFICATION_WHATSAPP_ENABLED=false
NOTIFICATION_WHATSAPP_PROVIDER=DUMMY

# Format: PROVIDER_1=secret,PROVIDER_2=secret
PAYMENT_WEBHOOK_PROVIDER_SECRETS=
PAYMENT_WEBHOOK_REQUIRE_PROVIDER_SECRET=true

# Optional bootstrap values
BOOTSTRAP_ENABLED=false
BOOTSTRAP_TENANT_NAME=
BOOTSTRAP_TENANT_ADDRESS=
BOOTSTRAP_ADMIN_NAME=ShieldAdmin
BOOTSTRAP_ADMIN_EMAIL=
BOOTSTRAP_ADMIN_PASSWORD=
